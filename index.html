<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>OBS Overlay</title>
  <style>
    body {
      margin: 0;
      background: transparent;
      overflow: hidden;
    }
    img, video {
      position: absolute;
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
  </style>
</head>
<body>

<div id="media"></div>

<script>
function loadMedia() {
  const data = localStorage.getItem("currentMedia");
  const container = document.getElementById("media");
  container.innerHTML = "";

  if (!data) return;

  const parsed = JSON.parse(data);

  if (parsed.type === "image") {
    const img = document.createElement("img");
    img.src = parsed.url;
    container.appendChild(img);
  }

  if (parsed.type === "video") {
    const video = document.createElement("video");
    video.src = parsed.url;
    video.autoplay = true;
    video.controls = false;
    video.volume = 1;
    container.appendChild(video);
  }
}

window.addEventListener("storage", loadMedia);
loadMedia();
</script>

</body>
</html>
